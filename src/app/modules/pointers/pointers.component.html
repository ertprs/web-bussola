<app-select-company
	(selectedCompany)="onCompanyChanged($event)"
></app-select-company>

<div *ngIf="kpis.length >= 0" class="row page-content">
	<div
		*ngIf="!!profit"
		class="col-12 col-md-6 chart-container profit-container"
	>
		<app-card
			[kpiAlias]="'07'"
			[externalId]="selectedCompany.externalId"
			[cnpj]="selectedCompany.cnpj"
			[title]="profit.title"
		>
			<div
				body
				class="row h-100 mx-auto yearly-profit align-items-center p-0"
			>
				<span
					class="card-text"
					[ngClass]="profit.value > 0 ? 'green' : 'red'"
				>
					{{ profit.value | currency: 'BRL':'symbol-narrow':'0.0-0' }}
				</span>
			</div>

			<div footer>
				<div class="float-right pr-2 pb-1">
					<button class="btn btn-link p-0" (click)="openModal('07')">
						Anotações
					</button>
				</div>
			</div>
		</app-card>
	</div>

	<div *ngFor="let kpi of kpis" class="col-12 col-md-6 chart-container">
		<div style="height: 40vh;">
			<app-card
				[kpiAlias]="kpi.kpiAlias"
				[externalId]="externalId"
				[cnpj]="selectedCompany.cnpj"
				[title]="kpi.title"
			>
				<div class="h-100" body>
					<app-chart [kpi]="kpi"></app-chart>
				</div>

				<div class="position-absolute w-100" style="bottom: 0" footer>
					<div class="float-right pr-2 pb-1">
						<button
							class="btn btn-link p-0"
							(click)="openModal(kpi.id)"
						>
							Anotações
						</button>
					</div>
				</div>
			</app-card>
		</div>
	</div>
</div>
<div
	*ngIf="kpis.length === 0 && !isLoading"
	class="row no-kpi-container page-content text-center"
>
	<h1 class="w-100 my-auto">
		Não há gráficos disponíveis para o CNPJ selecionado
	</h1>
</div>

<div *ngIf="isLoading" class="row no-kpi-container page-content text-center">
	<div class="mx-auto my-auto">
		<div class="loader"></div>
	</div>
</div>
